<html>
<head>
<link rel="shortcut icon" href="icoon.ico" />
</head>
<title>ARM-RUN EDITOR</title>
<link rel="stylesheet" type="text/css" href="pagestyle.css">
<!--<link rel="stylesheet" type="text/css" href="navstyle.css">-->

<body>

<nav>
<img src="logo.png">
<button id="assemble" onclick="map_commands()">Assemble</button>
<button id="reset_reg" onclick="reset_regs()">Reset</button>
<button id="step_up" onclick="step_up()">Step up</button>
<button id="step_down" onclick="reset_regs()">Step down</button>
No. of instructions:<div id="instructions">0</div> 
Line number:<input type="text" id="line_number">
<table>
  <tr>
    <th>Register</th>
    <th>Value</th>
    <th>Stack</th>
  </tr>
  <tr>
    <td>r0</td>
    <td id="r0">-</td>
    <td id="s15">-</td>
    <td id="i15">-</td>  <!--indicator 15-->
  </tr>
  <tr>
    <td>r1</td>
    <td id="r1">-</td>
    <td id="s14">-</td>
    <td id="i14">-</td>
  </tr>
  <tr>
    <td>r2</td>
    <td id="r2">-</td>
    <td id="s13">-</td>
    <td id="i13">-</td>
  </tr>
  <tr>
    <td>r3</td>
    <td id="r3">-</td>
    <td id="s12">-</td>
    <td id="i12">-</td>
  </tr>
  <tr>
    <td>r4</td>
    <td id="r4">-</td>
    <td id="s11">-</td>
    <td id="i11">-</td>
  </tr>
  <tr>
    <td>r5</td>
    <td id="r5">-</td>
    <td id="s10">-</td>
    <td id="i10">-</td>
  </tr>
  <tr>
    <td>r6</td>
    <td id="r6">-</td>
    <td id="s09">-</td>
    <td id="i09">-</td>
  </tr>
  <tr>
    <td>r7</td>
    <td id="r7">-</td>
    <td id="s08">-</td>
    <td id="i08">-</td>
  </tr>
  <tr>
    <td>r8</td>
    <td id="r8">-</td>
    <td id="s07">-</td>
    <td id="i07">-</td>
  </tr>
  <tr>
    <td>r9</td>
    <td id="r9">-</td>
    <td id="s06">-</td>
    <td id="i06">-</td>
  </tr>
  <tr>
    <td>r10</td>
    <td id="r10">-</td>
    <td id="s05">-</td>
    <td id="i05">-</td>
  </tr>
  <tr>
    <td>r11</td>
    <td id="r11">-</td>
    <td id="s04">-</td>
    <td id="i04">-</td>
  </tr>
  <tr>
    <td>r12</td>
    <td id="r12">-</td>
    <td id="s03">-</td>
    <td id="i03">-</td>
  </tr>
  <tr>
    <td>r13[sp]</td>
    <td id="sp">-</td>
    <td id="s02">-</td>
    <td id="i02">-</td>
  </tr>
  <tr>
    <td>r14[lr]</td>
    <td id="lr">-</td>
    <td id="s01">-</td>
    <td id="i01">-</td>
  </tr>
  <tr>
    <td>r15[pc]</td>
    <td id="pc">-</td>
    <td id="s00">-</td>
    <td id="i00">-</td>
  </tr>
</table>
<div id="data_memory">Data memory</div>
<table>
  <tr>
    <th>Location</th>
    <th>Label</th>
    <th>Value</th>
  </tr>
  <tr>
    <td>00</td>
    <td id="n00">-</td>
    <td id="d00">-</td>
  </tr>
  <tr>
    <td>01</td>
    <td id="n01">-</td>
    <td id="d01">-</td>
  </tr>
  <tr>
    <td>02</td>
    <td id="n02">-</td>
    <td id="d02">-</td>
  </tr>
  <tr>
    <td>03</td>
    <td id="n03">-</td>
    <td id="d03">-</td>
  </tr>
 </table>
</nav>
<header> Enter your source code	or upload a file from your computer</header>

<img id="editpng" src="edit.png">
<div id="editdiv">Source code:</div>

<img id="inpng" src="input.png">
<div id="indiv">Standard input:</div>

<!--img id=outputpng" src="output.png"-->
<div id="outdiv">Output:</div>

<table>
	
<tr>
	
<td colspan="3">
<div id="textin">#Enter your code here

	.text		
	.global main
main:                        
	
	.data 	 
</div>

<div id="div1">
</td>
</tr>

<tr>
<td><input id="inputFileNameToSaveAs"></input></td>
<td><button id="savetext" onclick="saveTextAsFile()">Save output to File:</button></td>
</tr>

<tr>
<!--<td>Select a File to Load:</td>-->
<td><input type="file" id="fileToLoad" class="custom-file-input"></td>
<td><button id="loadtext" onclick="loadFileAsText();">Load Selected File</button><td>
</tr>
</div>

</table>

<div id="outpane">

<textarea id="theOut" name="toCompiler" style="display:none"></textarea>
<input id="submit" type="button" value="Compile/Run" />
<textarea id="stin" name="toComp" style="resize:none; display; background-color: transparent" placeholder="Standard input" ></textarea>

</div>

<textarea readonly style="resize:none; color:#0431B4; background-color: #CECEF6;" placeholder="Standard output" id="out" name="comment" ;></textarea>

<footer>
Developed by ARM 2
</footer>

<script type = "text/javascript" src="jquery-1.11.1.js"></script>
<script type = "text/javascript" src="ajax.js"></script>
<script type = "text/javascript" src="process.js"></script>

<script src="src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("textin");
    editor.setTheme("ace/theme/github");
    editor.getSession().setMode("ace/mode/assembly_x86");
   // document.getElementById('editor').style.fontSize='20px';
   // editor.getSession().setTabSize(8);
</script>

<script type='text/javascript'>

function saveTextAsFile()
{
	var textToWrite = document.getElementById("out").value;

	var textFileAsBlob = new Blob([textToWrite], {type:'text/plain'});
	var fileNameToSaveAs = document.getElementById("inputFileNameToSaveAs").value;

	var downloadLink = document.createElement("a");
	downloadLink.download = fileNameToSaveAs;
	downloadLink.innerHTML = "Download File";
	if (window.webkitURL != null)
	{
		// Chrome allows the link to be clicked
		// without actually adding it to the DOM.
		downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);
	}
	else
	{
		// Firefox requires the link to be added to the DOM
		// before it can be clicked.
		downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
		downloadLink.onclick = destroyClickedElement;
		downloadLink.style.display = "none";
		document.body.appendChild(downloadLink);
	}

	downloadLink.click();
}

function destroyClickedElement(event)
{
	document.body.removeChild(event.target);
}

function loadFileAsText()
{
	var fileToLoad = document.getElementById("fileToLoad").files[0];

	var fileReader = new FileReader();
	fileReader.onload = function(fileLoadedEvent) 
	{
		textin.getSelectedText = function() {
    		this.session.getTextRange(this.getSelectionRange())
} 
		var textFromFileLoaded = fileLoadedEvent.target.result;
		editor.setValue(textFromFileLoaded);
	};
	fileReader.readAsText(fileToLoad, "UTF-4");
}
	
</script>

</body>
</html>
